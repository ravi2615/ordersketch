{"ast":null,"code":"import _toConsumableArray from\"F:\\\\react\\\\mobile\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"F:\\\\react\\\\mobile\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"F:\\\\react\\\\mobile\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\react\\\\mobile\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"F:\\\\react\\\\mobile\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\react\\\\mobile\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";// import React, { Component } from 'react';\n// import {storeProducts, detailProduct} from './data';\n// const ProductContext = React.createContext();\n// class ProductProvider extends Component {\n//     state ={\n//         products:[],\n//         detailProduct:detailProduct,\n//         cart:[]\n//     };\n//     componentDidMount() {\n//         this.setProducts();\n//     }\n//     setProducts = ()=> {\n//         let tempProducts = [];\n//         storeProducts.forEach(item =>{\n//             const singleItem ={...item};\n//             tempProducts =[...tempProducts,singleItem];\n//     });\n//     this.setState(()=>{\n//         return {products:tempProducts}\n//     });\n// };\n// getItem = id => {\n//     const product = this.state.products.find(item => item.id===id);\n//     return product;\n// }\n//     handleDetail = id => {\n//         const product = this.getItem(id);\n//         this.setState(()=>{\n//             return {detailProduct:product}\n//         });\n//     };\n//     addToCart = (id) => {\n//         let tempProducts = [...this.state.products];\n//         const index = tempProducts.indexOf(this.getItem(id));\n//         const product = tempProducts[index];\n//         product.inCart = true;\n//         product.count = 1;\n//         const price = product.price;\n//         product.total = price;\n//         this.setState(()=>{\n//             return {products:tempProducts, cart:[...this.state.cart, product] };\n//         },()=>{console.log(this.state)});\n//     };\n//     render() {\n//         return (\n//             <>\n//             <ProductContext.Provider value={{\n//                 ...this.state,\n//                 handleDetail: this.state.handleDetail,\n//                 addToCart: this.state.addToCart\n//             }}>\n//                 {this.props.children}\n//             </ProductContext.Provider>\n//             </>\n//         )\n//     }\n// }\n// const ProductConsumer = ProductContext.Consumer;\n// export {ProductProvider , ProductConsumer };\nimport React,{Component}from\"react\";import{storeProducts,detailProduct}from\"./data\";var ProductContext=React.createContext();var ProductProvider=/*#__PURE__*/function(_Component){_inherits(ProductProvider,_Component);var _super=_createSuper(ProductProvider);function ProductProvider(){var _this;_classCallCheck(this,ProductProvider);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={products:[],detailProduct:detailProduct,cart:[],modalOpen:false,modalProduct:detailProduct,cartSubTotal:0,cartTax:0,cartTotal:0,openLogin:false};_this.setProducts=function(){var products=[];storeProducts.forEach(function(item){var singleItem=_objectSpread({},item);products=[].concat(_toConsumableArray(products),[singleItem]);});_this.setState(function(){return{products:products};},_this.checkCartItems);};_this.getItem=function(id){var product=_this.state.products.find(function(item){return item.id===id;});return product;};_this.handleDetail=function(id){var product=_this.getItem(id);_this.setState(function(){return{detailProduct:product};});};_this.addToCart=function(id){var tempProducts=_toConsumableArray(_this.state.products);var index=tempProducts.indexOf(_this.getItem(id));var product=tempProducts[index];product.inCart=true;product.count=1;var price=product.price;product.total=price;_this.setState(function(){return{products:_toConsumableArray(tempProducts),cart:[].concat(_toConsumableArray(_this.state.cart),[product]),detailProduct:_objectSpread({},product)};},_this.addTotals);};_this.openModal=function(id){var product=_this.getItem(id);_this.setState(function(){return{modalProduct:product,modalOpen:true};});};_this.closeModal=function(){_this.setState(function(){return{modalOpen:false};});};_this.increment=function(id){var tempCart=_toConsumableArray(_this.state.cart);var selectedProduct=tempCart.find(function(item){return item.id===id;});var index=tempCart.indexOf(selectedProduct);var product=tempCart[index];product.count=product.count+1;product.total=product.count*product.price;_this.setState(function(){return{cart:_toConsumableArray(tempCart)};},_this.addTotals);};_this.decrement=function(id){var tempCart=_toConsumableArray(_this.state.cart);var selectedProduct=tempCart.find(function(item){return item.id===id;});var index=tempCart.indexOf(selectedProduct);var product=tempCart[index];product.count=product.count-1;if(product.count===0){_this.removeItem(id);}else{product.total=product.count*product.price;_this.setState(function(){return{cart:_toConsumableArray(tempCart)};},_this.addTotals);}};_this.getTotals=function(){// const subTotal = this.state.cart\n//   .map(item => item.total)\n//   .reduce((acc, curr) => {\n//     acc = acc + curr;\n//     return acc;\n//   }, 0);\nvar subTotal=0;_this.state.cart.map(function(item){return subTotal+=item.total;});var tempTax=subTotal*0.5;var tax=parseFloat(tempTax.toFixed(2));var total=subTotal+tax;return{subTotal:subTotal,tax:tax,total:total};};_this.addTotals=function(){var totals=_this.getTotals();_this.setState(function(){return{cartSubTotal:totals.subTotal,cartTax:totals.tax,cartTotal:totals.total};},function(){// console.log(this.state);\n});};_this.removeItem=function(id){var tempProducts=_toConsumableArray(_this.state.products);var tempCart=_toConsumableArray(_this.state.cart);var index=tempProducts.indexOf(_this.getItem(id));var removedProduct=tempProducts[index];removedProduct.inCart=false;removedProduct.count=0;removedProduct.total=0;tempCart=tempCart.filter(function(item){return item.id!==id;});_this.setState(function(){return{cart:_toConsumableArray(tempCart),products:_toConsumableArray(tempProducts)};},_this.addTotals);};_this.clearCart=function(){_this.setState(function(){return{cart:[]};},function(){_this.setProducts();_this.addTotals();});};_this.openLogin=function(){_this.setState(function(){return{openLogin:true};});};_this.closeLogin=function(){_this.setState(function(){return{openLogin:false};});};return _this;}_createClass(ProductProvider,[{key:\"componentDidMount\",value:function componentDidMount(){this.setProducts();}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(ProductContext.Provider,{value:_objectSpread(_objectSpread({},this.state),{},{handleDetail:this.handleDetail,addToCart:this.addToCart,openModal:this.openModal,closeModal:this.closeModal,increment:this.increment,decrement:this.decrement,removeItem:this.removeItem,clearCart:this.clearCart,openLogin:this.openLogin,closeLogin:this.closeLogin})},this.props.children);}}]);return ProductProvider;}(Component);var ProductConsumer=ProductContext.Consumer;export{ProductProvider,ProductConsumer};","map":{"version":3,"sources":["F:/react/mobile/src/Context.js"],"names":["React","Component","storeProducts","detailProduct","ProductContext","createContext","ProductProvider","state","products","cart","modalOpen","modalProduct","cartSubTotal","cartTax","cartTotal","openLogin","setProducts","forEach","item","singleItem","setState","checkCartItems","getItem","id","product","find","handleDetail","addToCart","tempProducts","index","indexOf","inCart","count","price","total","addTotals","openModal","closeModal","increment","tempCart","selectedProduct","decrement","removeItem","getTotals","subTotal","map","tempTax","tax","parseFloat","toFixed","totals","removedProduct","filter","clearCart","closeLogin","props","children","ProductConsumer","Consumer"],"mappings":"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","sourcesContent":["// import React, { Component } from 'react';\r\n// import {storeProducts, detailProduct} from './data';\r\n\r\n// const ProductContext = React.createContext();\r\n\r\n// class ProductProvider extends Component {\r\n//     state ={\r\n//         products:[],\r\n//         detailProduct:detailProduct,\r\n//         cart:[]\r\n//     };\r\n    \r\n//     componentDidMount() {\r\n//         this.setProducts();\r\n//     }\r\n//     setProducts = ()=> {\r\n//         let tempProducts = [];\r\n//         storeProducts.forEach(item =>{\r\n//             const singleItem ={...item};\r\n//             tempProducts =[...tempProducts,singleItem];\r\n//     });\r\n    \r\n\r\n//     this.setState(()=>{\r\n//         return {products:tempProducts}\r\n//     });\r\n\r\n// };\r\n\r\n// getItem = id => {\r\n//     const product = this.state.products.find(item => item.id===id);\r\n//     return product;\r\n// }\r\n//     handleDetail = id => {\r\n//         const product = this.getItem(id);\r\n//         this.setState(()=>{\r\n//             return {detailProduct:product}\r\n//         });\r\n//     };\r\n\r\n//     addToCart = (id) => {\r\n//         let tempProducts = [...this.state.products];\r\n//         const index = tempProducts.indexOf(this.getItem(id));\r\n//         const product = tempProducts[index];\r\n//         product.inCart = true;\r\n//         product.count = 1;\r\n//         const price = product.price;\r\n//         product.total = price;\r\n//         this.setState(()=>{\r\n//             return {products:tempProducts, cart:[...this.state.cart, product] };\r\n//         },()=>{console.log(this.state)});\r\n//     };\r\n\r\n//     render() {\r\n//         return (\r\n//             <>\r\n//             <ProductContext.Provider value={{\r\n//                 ...this.state,\r\n//                 handleDetail: this.state.handleDetail,\r\n//                 addToCart: this.state.addToCart\r\n//             }}>\r\n//                 {this.props.children}\r\n                \r\n//             </ProductContext.Provider>\r\n//             </>\r\n//         )\r\n//     }\r\n// }\r\n\r\n// const ProductConsumer = ProductContext.Consumer;\r\n\r\n// export {ProductProvider , ProductConsumer };\r\n\r\nimport React, { Component } from \"react\";\r\nimport { storeProducts, detailProduct } from \"./data\";\r\nconst ProductContext = React.createContext();\r\n\r\nclass ProductProvider extends Component {\r\n  state = {\r\n    products: [],\r\n    detailProduct: detailProduct,\r\n    cart: [],\r\n    modalOpen: false,\r\n    modalProduct: detailProduct,\r\n    cartSubTotal: 0,\r\n    cartTax: 0,\r\n    cartTotal: 0,\r\n    openLogin: false\r\n  };\r\n  componentDidMount() {\r\n    this.setProducts();\r\n  }\r\n\r\n  setProducts = () => {\r\n    let products = [];\r\n    storeProducts.forEach(item => {\r\n      const singleItem = { ...item };\r\n      products = [...products, singleItem];\r\n    });\r\n    this.setState(() => {\r\n      return { products };\r\n    }, this.checkCartItems);\r\n  };\r\n\r\n  getItem = id => {\r\n    const product = this.state.products.find(item => item.id === id);\r\n    return product;\r\n  };\r\n  handleDetail = id => {\r\n    const product = this.getItem(id);\r\n    this.setState(() => {\r\n      return { detailProduct: product };\r\n    });\r\n  };\r\n  addToCart = id => {\r\n    let tempProducts = [...this.state.products];\r\n    const index = tempProducts.indexOf(this.getItem(id));\r\n    const product = tempProducts[index];\r\n    product.inCart = true;\r\n    product.count = 1;\r\n    const price = product.price;\r\n    product.total = price;\r\n\r\n    this.setState(() => {\r\n      return {\r\n        products: [...tempProducts],\r\n        cart: [...this.state.cart, product],\r\n        detailProduct: { ...product }\r\n      };\r\n    }, this.addTotals);\r\n  };\r\n  openModal = id => {\r\n    const product = this.getItem(id);\r\n    this.setState(() => {\r\n      return { modalProduct: product, modalOpen: true };\r\n    });\r\n  };\r\n  closeModal = () => {\r\n    this.setState(() => {\r\n      return { modalOpen: false };\r\n    });\r\n  };\r\n  increment = id => {\r\n    let tempCart = [...this.state.cart];\r\n    const selectedProduct = tempCart.find(item => {\r\n      return item.id === id;\r\n    });\r\n    const index = tempCart.indexOf(selectedProduct);\r\n    const product = tempCart[index];\r\n    product.count = product.count + 1;\r\n    product.total = product.count * product.price;\r\n    this.setState(() => {\r\n      return {\r\n        cart: [...tempCart]\r\n      };\r\n    }, this.addTotals);\r\n  };\r\n  decrement = id => {\r\n    let tempCart = [...this.state.cart];\r\n    const selectedProduct = tempCart.find(item => {\r\n      return item.id === id;\r\n    });\r\n    const index = tempCart.indexOf(selectedProduct);\r\n    const product = tempCart[index];\r\n    product.count = product.count - 1;\r\n    if (product.count === 0) {\r\n      this.removeItem(id);\r\n    } else {\r\n      product.total = product.count * product.price;\r\n      this.setState(() => {\r\n        return { cart: [...tempCart] };\r\n      }, this.addTotals);\r\n    }\r\n  };\r\n  getTotals = () => {\r\n    // const subTotal = this.state.cart\r\n    //   .map(item => item.total)\r\n    //   .reduce((acc, curr) => {\r\n    //     acc = acc + curr;\r\n    //     return acc;\r\n    //   }, 0);\r\n    let subTotal = 0;\r\n    this.state.cart.map(item => (subTotal += item.total));\r\n    const tempTax = subTotal * 0.5;\r\n    const tax = parseFloat(tempTax.toFixed(2));\r\n    const total = subTotal + tax;\r\n    return {\r\n      subTotal,\r\n      tax,\r\n      total\r\n    };\r\n  };\r\n  addTotals = () => {\r\n    const totals = this.getTotals();\r\n    this.setState(\r\n      () => {\r\n        return {\r\n          cartSubTotal: totals.subTotal,\r\n          cartTax: totals.tax,\r\n          cartTotal: totals.total\r\n        };\r\n      },\r\n      () => {\r\n        // console.log(this.state);\r\n      }\r\n    );\r\n  };\r\n  removeItem = id => {\r\n    let tempProducts = [...this.state.products];\r\n    let tempCart = [...this.state.cart];\r\n\r\n    const index = tempProducts.indexOf(this.getItem(id));\r\n    let removedProduct = tempProducts[index];\r\n    removedProduct.inCart = false;\r\n    removedProduct.count = 0;\r\n    removedProduct.total = 0;\r\n\r\n    tempCart = tempCart.filter(item => {\r\n      return item.id !== id;\r\n    });\r\n\r\n    this.setState(() => {\r\n      return {\r\n        cart: [...tempCart],\r\n        products: [...tempProducts]\r\n      };\r\n    }, this.addTotals);\r\n  };\r\n  clearCart = () => {\r\n    this.setState(\r\n      () => {\r\n        return { cart: [] };\r\n      },\r\n      () => {\r\n        this.setProducts();\r\n        this.addTotals();\r\n      }\r\n    );\r\n  };\r\n\r\n  openLogin = () => {\r\n    this.setState(() => {\r\n      return { openLogin: true };\r\n    });\r\n  };\r\n\r\n  closeLogin = () => {\r\n    this.setState(() => {\r\n      return { openLogin: false };\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <ProductContext.Provider\r\n        value={{\r\n          ...this.state,\r\n          handleDetail: this.handleDetail,\r\n          addToCart: this.addToCart,\r\n          openModal: this.openModal,\r\n          closeModal: this.closeModal,\r\n          increment: this.increment,\r\n          decrement: this.decrement,\r\n          removeItem: this.removeItem,\r\n          clearCart: this.clearCart,\r\n          openLogin: this.openLogin,\r\n          closeLogin: this.closeLogin,\r\n        }}\r\n      >\r\n        {this.props.children}\r\n      </ProductContext.Provider>\r\n    );\r\n  }\r\n}\r\n\r\nconst ProductConsumer = ProductContext.Consumer;\r\n\r\nexport { ProductProvider, ProductConsumer };"]},"metadata":{},"sourceType":"module"}